<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Nodes</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Nodes
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../files/interpreter_rb.html">interpreter.rb</a>
          </li>
          <li class='other'>
            <a target="docwin" href="../files/nodes_rb.html">nodes.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
        <div class='parent'>
          Superclass:
          <strong>Struct.new(:nodes)</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>The <a href="Nodes.html">Nodes</a> class will always be at the top of the
            AST. Its only purpose it to contain other nodes. It correspond to a block
            of code or a series of expressions.</p>
            
            <p>The eval method of every node is the “interpreter” part of our language.
            All nodes know how to evalualte themselves and return the result of their
            evaluation. The context variable is the <a href="Context.html">Context</a>
            in which the node is evaluated (local variables, current self and current
            class).</p>
            
            <p>The first type is responsible for holding a collection of nodes, each one
            representing an expression. You can think of it as the internal
            representation of a block of code.</p>
            
            <p>Here we define nodes as Ruby classes that inherit from a Struct. This is a
            simple way, in Ruby, to create a class that holds some attributes (values).
            It is almost equivalent to:</p>
            
            <pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Nodes</span>&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">nodes</span>)&#x000A;    <span class="ruby-ivar">@nodes</span> = <span class="ruby-identifier">nodes</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;&#x000A;  <span class="ruby-keyword">def</span> <span class="ruby-identifier">nodes</span>&#x000A;    <span class="ruby-ivar">@nodes</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;&#x000A;<span class="ruby-identifier">n</span> = <span class="ruby-constant">Nodes</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;this is stored @nodes&quot;</span>)&#x000A;<span class="ruby-identifier">n</span>.<span class="ruby-identifier">nodes</span> <span class="ruby-comment"># =&gt; &quot;this is stored @nodes&quot;</span></pre>
            
            <p>But Ruby&#39;s Struct takes care of overriding the == operator for us and a
            bunch of other things that will make testing easier.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-3C-3C"><<</a></li>
              <li><a target="docwin" href="#method-i-eval">eval</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-3C-3C'>
                <a name='method-i-3C-3C'></a>
                <div class='synopsis'>
                  <span class='name'><<</span>
                  <span class='arguments'>(node)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-3C-3C-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-3C-3C-source'><span class="ruby-comment"># File nodes.rb, line 25</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">node</span>) <span class="ruby-comment"># Useful method for adding a node on the fly.</span>&#x000A;  <span class="ruby-identifier">nodes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">node</span>&#x000A;  <span class="ruby-keyword">self</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-eval'>
                <a name='method-i-eval'></a>
                <div class='synopsis'>
                  <span class='name'>eval</span>
                  <span class='arguments'>(context)</span>
                </div>
                <div class='description'>
                  
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-eval-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-eval-source'><span class="ruby-comment"># File interpreter.rb, line 32</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">context</span>)&#x000A;  <span class="ruby-identifier">return_value</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">return_value</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">eval</span>(<span class="ruby-identifier">context</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">return_value</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Constants</span>[<span class="ruby-string">&quot;nil&quot;</span>] <span class="ruby-comment"># Last result is return value (or nil if none).</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
