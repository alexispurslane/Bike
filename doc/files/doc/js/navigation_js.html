<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>navigation.js</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>navigation.js</h1>
        <div class='paths'>
          doc/js/navigation.js
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>2014-11-26 18:44:11 -0800</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <pre>Navigation allows movement using the arrow keys through the search results.&#x000A;When using this library you will need to set scrollIntoView to the&#x000A;appropriate function for your layout.  Use scrollInWindow if the container&#x000A;is not scrollable and scrollInElement if the container is a separate&#x000A;scrolling region.</pre>
            
            <p>Navigation = new function() {</p>
            
            <pre>this.initNavigation = function() {&#x000A;  var _this = this;&#x000A;  $(document).keydown(function(e) {&#x000A;    _this.onkeydown(e);&#x000A;  }).keyup(function(e) {&#x000A;    _this.onkeyup(e);&#x000A;  });&#x000A;&#x000A;  this.navigationActive = true;&#x000A;}&#x000A;&#x000A;this.setNavigationActive = function(state) {&#x000A;  this.navigationActive = state;&#x000A;  this.clearMoveTimeout();&#x000A;}&#x000A;&#x000A;this.onkeyup = function(e) {&#x000A;  if (!this.navigationActive) return;&#x000A;&#x000A;  switch(e.keyCode) {&#x000A;    case 37: //Event.KEY_LEFT:&#x000A;    case 38: //Event.KEY_UP:&#x000A;    case 39: //Event.KEY_RIGHT:&#x000A;    case 40: //Event.KEY_DOWN:&#x000A;      this.clearMoveTimeout();&#x000A;      break;&#x000A;  }&#x000A;}&#x000A;&#x000A;this.onkeydown = function(e) {&#x000A;  if (!this.navigationActive) return;&#x000A;  switch(e.keyCode) {&#x000A;    case 37: //Event.KEY_LEFT:&#x000A;      if (this.moveLeft()) e.preventDefault();&#x000A;      break;&#x000A;    case 38: //Event.KEY_UP:&#x000A;      if (e.keyCode == 38 || e.ctrlKey) {&#x000A;        if (this.moveUp()) e.preventDefault();&#x000A;        this.startMoveTimeout(false);&#x000A;      }&#x000A;      break;&#x000A;    case 39: //Event.KEY_RIGHT:&#x000A;      if (this.moveRight()) e.preventDefault();&#x000A;      break;&#x000A;    case 40: //Event.KEY_DOWN:&#x000A;      if (e.keyCode == 40 || e.ctrlKey) {&#x000A;        if (this.moveDown()) e.preventDefault();&#x000A;        this.startMoveTimeout(true);&#x000A;      }&#x000A;      break;&#x000A;    case 13: //Event.KEY_RETURN:&#x000A;      if (this.$current)&#x000A;        e.preventDefault();&#x000A;        this.select(this.$current);&#x000A;      break;&#x000A;  }&#x000A;  if (e.ctrlKey &amp;&amp; e.shiftKey) this.select(this.$current);&#x000A;}&#x000A;&#x000A;this.clearMoveTimeout = function() {&#x000A;  clearTimeout(this.moveTimeout);&#x000A;  this.moveTimeout = null;&#x000A;}&#x000A;&#x000A;this.startMoveTimeout = function(isDown) {&#x000A;  if (!$.browser.mozilla &amp;&amp; !$.browser.opera) return;&#x000A;  if (this.moveTimeout) this.clearMoveTimeout();&#x000A;  var _this = this;&#x000A;&#x000A;  var go = function() {&#x000A;    if (!_this.moveTimeout) return;&#x000A;    _this[isDown ? &#39;moveDown&#39; : &#39;moveUp&#39;]();&#x000A;    _this.moveTimout = setTimeout(go, 100);&#x000A;  }&#x000A;  this.moveTimeout = setTimeout(go, 200);&#x000A;}&#x000A;&#x000A;this.moveRight = function() {&#x000A;}&#x000A;&#x000A;this.moveLeft = function() {&#x000A;}&#x000A;&#x000A;this.move = function(isDown) {&#x000A;}&#x000A;&#x000A;this.moveUp = function() {&#x000A;  return this.move(false);&#x000A;}&#x000A;&#x000A;this.moveDown = function() {&#x000A;  return this.move(true);&#x000A;}&#x000A;&#x000A;/*&#x000A;   Scrolls to the given element in the scrollable element view.&#x000A;  /&#x000A;this.scrollInElement = function(element, view) {&#x000A;  var offset, viewHeight, viewScroll, height;&#x000A;  offset = element.offsetTop;&#x000A;  height = element.offsetHeight;&#x000A;  viewHeight = view.offsetHeight;&#x000A;  viewScroll = view.scrollTop;&#x000A;&#x000A;  if (offset - viewScroll + height &gt; viewHeight) {&#x000A;    view.scrollTop = offset - viewHeight + height;&#x000A;  }&#x000A;  if (offset &lt; viewScroll) {&#x000A;    view.scrollTop = offset;&#x000A;  }&#x000A;}&#x000A;&#x000A;/*&#x000A;   Scrolls to the given element in the window.  The second argument is&#x000A;   ignored&#x000A;  /&#x000A;this.scrollInWindow = function(element, ignored) {&#x000A;  var offset, viewHeight, viewScroll, height;&#x000A;  offset = element.offsetTop;&#x000A;  height = element.offsetHeight;&#x000A;  viewHeight = window.innerHeight;&#x000A;  viewScroll = window.scrollY;&#x000A;&#x000A;  if (offset - viewScroll + height &gt; viewHeight) {&#x000A;    window.scrollTo(window.scrollX, offset - viewHeight + height);&#x000A;  }&#x000A;  if (offset &lt; viewScroll) {&#x000A;    window.scrollTo(window.scrollX, offset);&#x000A;  }&#x000A;}</pre>
            
            <p>}</p>
          </div>
          <div id='context'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
